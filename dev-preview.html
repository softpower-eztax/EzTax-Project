<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EzTax ê°œë°œ ë¯¸ë¦¬ë³´ê¸°</title>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0; 
            padding: 20px; 
            background: #f5f5f5; 
        }
        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            background: white; 
            border-radius: 8px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header { 
            background: #2563eb; 
            color: white; 
            padding: 20px; 
            text-align: center; 
        }
        .status { 
            background: #10b981; 
            color: white; 
            padding: 10px 20px; 
            margin: 20px; 
            border-radius: 5px; 
        }
        .section { 
            padding: 20px; 
            border-bottom: 1px solid #e5e5e5; 
        }
        .api-test { 
            background: #f8f9fa; 
            padding: 15px; 
            border-radius: 5px; 
            margin: 10px 0; 
        }
        .btn { 
            background: #2563eb; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            border-radius: 5px; 
            cursor: pointer; 
            margin: 5px; 
        }
        .btn:hover { background: #1d4ed8; }
        .result { 
            background: #f1f5f9; 
            padding: 10px; 
            border-radius: 5px; 
            margin: 10px 0; 
            font-family: monospace; 
            white-space: pre-wrap; 
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ§¾ EzTax - ì„¸ê¸ˆ ì‹ ê³  ì‹œìŠ¤í…œ</h1>
            <p>ê°œë°œ í™˜ê²½ í…ŒìŠ¤íŠ¸ ì¸í„°í˜ì´ìŠ¤</p>
        </div>

        <div class="status">
            âœ… ì„œë²„ ìƒíƒœ: ì •ìƒ ì‹¤í–‰ ì¤‘ (í¬íŠ¸ 5000)
        </div>

        <div class="section">
            <h2>ğŸ“Š ì• í”Œë¦¬ì¼€ì´ì…˜ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</h2>
            
            <div class="api-test">
                <h3>ì„¸ê¸ˆ ì‹ ê³ ì„œ ë°ì´í„° ì¡°íšŒ</h3>
                <button class="btn" onclick="testAPI('/api/tax-return')">í˜„ì¬ ì„¸ê¸ˆ ì‹ ê³ ì„œ ë¶ˆëŸ¬ì˜¤ê¸°</button>
                <div id="tax-return-result" class="result"></div>
            </div>

            <div class="api-test">
                <h3>ì‚¬ìš©ì ì¸ì¦ ìƒíƒœ</h3>
                <button class="btn" onclick="testAPI('/api/user')">ì‚¬ìš©ì ì •ë³´ í™•ì¸</button>
                <div id="user-result" class="result"></div>
            </div>

            <div class="api-test">
                <h3>ìƒˆ ì„¸ê¸ˆ ì‹ ê³ ì„œ ìƒì„±</h3>
                <button class="btn" onclick="createTaxReturn()">ìƒˆ ì‹ ê³ ì„œ ìƒì„±</button>
                <div id="create-result" class="result"></div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ¯ ì£¼ìš” ê¸°ëŠ¥ ìƒíƒœ</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                <div style="background: #ecfdf5; padding: 15px; border-radius: 5px;">
                    <h4>âœ… ê°œì¸ì •ë³´ ì…ë ¥</h4>
                    <p>ì´ë¦„, ì£¼ì†Œ, SSN ë“± ê¸°ë³¸ì •ë³´ ì €ì¥</p>
                </div>
                <div style="background: #ecfdf5; padding: 15px; border-radius: 5px;">
                    <h4>âœ… ì†Œë“ ê³„ì‚°</h4>
                    <p>ê¸‰ì—¬, ì´ì, ë°°ë‹¹ê¸ˆ ë“± ì†Œë“ ê³„ì‚°</p>
                </div>
                <div style="background: #ecfdf5; padding: 15px; border-radius: 5px;">
                    <h4>âœ… ê³µì œ ì²˜ë¦¬</h4>
                    <p>í‘œì¤€/í•­ëª©ë³„ ê³µì œ, SALT ê³µì œ í¬í•¨</p>
                </div>
                <div style="background: #ecfdf5; padding: 15px; border-radius: 5px;">
                    <h4>âœ… ì„¸ì•¡ê³µì œ</h4>
                    <p>ìë…€ì„¸ì•¡ê³µì œ, êµìœ¡ì„¸ì•¡ê³µì œ ë“±</p>
                </div>
                <div style="background: #ecfdf5; padding: 15px; border-radius: 5px;">
                    <h4>âœ… ìµœì¢… ê³„ì‚°</h4>
                    <p>í™˜ê¸‰ì•¡/ë‚©ë¶€ì•¡ ìë™ ê³„ì‚°</p>
                </div>
                <div style="background: #ecfdf5; padding: 15px; border-radius: 5px;">
                    <h4>âœ… ë°ì´í„° ì €ì¥</h4>
                    <p>PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ”§ ê°œë°œ ë„êµ¬</h2>
            <button class="btn" onclick="window.open('https://3e18f96e-0fbf-4af6-b766-cfbae9f2437b-00-17nnd6cbvtwuy.janeway.replit.dev/', '_blank')">
                ğŸŒ ì™¸ë¶€ URLë¡œ ì ‘ê·¼ ì‹œë„
            </button>
            <button class="btn" onclick="location.reload()">ğŸ”„ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨</button>
            <button class="btn" onclick="showFileStructure()">ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡° ë³´ê¸°</button>
        </div>

        <div class="section">
            <h2>ğŸ“ ìˆ˜ì • ê°€ëŠ¥í•œ ì£¼ìš” íŒŒì¼ë“¤</h2>
            <ul>
                <li><strong>client/src/pages/</strong> - ê° ë‹¨ê³„ë³„ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸</li>
                <li><strong>client/src/context/TaxContext.tsx</strong> - ì„¸ê¸ˆ ê³„ì‚° ë¡œì§</li>
                <li><strong>server/routes.ts</strong> - API ì—”ë“œí¬ì¸íŠ¸</li>
                <li><strong>shared/schema.ts</strong> - ë°ì´í„° ìŠ¤í‚¤ë§ˆ ì •ì˜</li>
            </ul>
        </div>
    </div>

    <script>
        async function testAPI(endpoint) {
            const resultId = endpoint.replace('/api/', '') + '-result';
            const resultDiv = document.getElementById(resultId);
            
            try {
                resultDiv.textContent = 'ë¡œë”© ì¤‘...';
                
                // Try multiple connection methods
                const urls = [
                    `http://localhost:5000${endpoint}`,
                    `https://3e18f96e-0fbf-4af6-b766-cfbae9f2437b-00-17nnd6cbvtwuy.janeway.replit.dev${endpoint}`,
                    `http://127.0.0.1:5000${endpoint}`
                ];
                
                let lastError;
                for (const url of urls) {
                    try {
                        const response = await fetch(url, {
                            mode: 'cors',
                            headers: {
                                'Accept': 'application/json',
                                'Content-Type': 'application/json'
                            }
                        });
                        const data = await response.json();
                        resultDiv.textContent = `ì—°ê²° ì„±ê³µ: ${url}\nìƒíƒœ: ${response.status}\n\n` + JSON.stringify(data, null, 2);
                        return;
                    } catch (error) {
                        lastError = error;
                        continue;
                    }
                }
                throw lastError;
            } catch (error) {
                resultDiv.textContent = `ì—°ê²° ì‹¤íŒ¨: ${error.message}\n\nì„œë²„ ìƒíƒœë¥¼ í™•ì¸í•˜ê±°ë‚˜ ë‹¤ìŒ URLë¡œ ì§ì ‘ ì ‘ê·¼í•´ë³´ì„¸ìš”:\n- http://localhost:5000\n- https://3e18f96e-0fbf-4af6-b766-cfbae9f2437b-00-17nnd6cbvtwuy.janeway.replit.dev`;
            }
        }

        async function createTaxReturn() {
            const resultDiv = document.getElementById('create-result');
            
            try {
                resultDiv.textContent = 'ìƒˆ ì„¸ê¸ˆ ì‹ ê³ ì„œ ìƒì„± ì¤‘...';
                const response = await fetch('http://localhost:5000/api/tax-return', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        userId: 1,
                        taxYear: 2025,
                        status: 'in_progress',
                        personalInfo: {
                            firstName: 'í…ŒìŠ¤íŠ¸',
                            lastName: 'ì‚¬ìš©ì',
                            filingStatus: 'single',
                            dependents: []
                        }
                    })
                });
                const data = await response.json();
                resultDiv.textContent = `ìƒíƒœ: ${response.status}\nìƒì„±ëœ ID: ${data.id}\n\n` + JSON.stringify(data, null, 2);
            } catch (error) {
                resultDiv.textContent = `ì˜¤ë¥˜: ${error.message}`;
            }
        }

        function showFileStructure() {
            alert(`EzTax í”„ë¡œì íŠ¸ êµ¬ì¡°:

ğŸ“ client/
  ğŸ“ src/
    ğŸ“ pages/ - ì„¸ê¸ˆ ì‹ ê³  ë‹¨ê³„ë³„ í˜ì´ì§€
    ğŸ“ components/ - ì¬ì‚¬ìš© ì»´í¬ë„ŒíŠ¸
    ğŸ“ context/ - ì „ì—­ ìƒíƒœ ê´€ë¦¬
    ğŸ“ hooks/ - ì»¤ìŠ¤í…€ í›…

ğŸ“ server/
  ğŸ“„ routes.ts - API ë¼ìš°íŠ¸
  ğŸ“„ auth.ts - ì¸ì¦ ì‹œìŠ¤í…œ
  ğŸ“„ storage.ts - ë°ì´í„° ì €ì¥

ğŸ“ shared/
  ğŸ“„ schema.ts - ë°ì´í„° ìŠ¤í‚¤ë§ˆ`);
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        window.onload = function() {
            testAPI('/api/tax-return');
        };
    </script>
</body>
</html>